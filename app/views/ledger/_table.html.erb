<table class="table table-striped table-dark ct-table ct-table-head ct-table-ledger">
  <thead>
  <tr>
    <th class="ledger-col-width text-center">Date</th>
    <th class="ledger-lg-col-width text-center">Label</th>
    <th class="ledger-col-width text-center">Symbol</th>
    <th class="ledger-col-width text-center">Debit</th>
    <th class="ledger-col-width text-center">Credit</th>
    <th class="ledger-col-width text-center">Dev/<%= ref_char %></th>
    <th class="ledger-col-width text-center">Debit (<%= ref_char %>)</th>
    <th class="ledger-col-width text-center">Credit (<%= ref_char %>)</th>
    <th class="ledger-col-width text-center"></th>

  </tr>
  </thead>
</table>
<div class="ct-table-body-parent">
  <table class="table table-striped table-dark ct-table ct-table-ledger">
    <tbody>
    <% @entries.each do |ledger|
      current_usd = ledger.current_usd
      amount_usd = (ledger.current_usd*ledger.count).round(2)
      amount_dev = ledger.count.round(3)
       -%>
      <tr>
        <td><%= render 'shared/cell', content: ledger.created_at.strftime('%b-%d %H:%M') %></td>
        <td class="ledger-lg-col-width"><%= render 'shared/cell', content: ledger.description %></td>
        <td><%= render 'shared/cell', content: ledger.symbol %></td>
        <td><%= render 'shared/cell', content: -num_norm(amount_dev) if ledger.count < 0 %></td>
        <td><%= render 'shared/cell', content: num_norm(amount_dev) if ledger.count > 0 %></td>
        <td><%= render 'shared/cell', content: usd_to_ref_fine(current_usd) %></td>
        <td><%= render 'shared/cell', content: -usd_to_ref_norm(amount_usd) if amount_usd < 0 %></td>
        <td><%= render 'shared/cell', content: usd_to_ref_norm(amount_usd) if amount_usd > 0 %></td>
        <td>
          <div class="d-flex justify-content-center">
            <%
              if ledger.trade != nil
                if ledger.trade.closed
                  target_path = history_update_path(id: ledger.trade.id)
                else
                  target_path = trade_update_path(id: ledger.trade.id)
                end
              else
                target_path = ledger_update_path(id: ledger.id)
              end
            %>
            <%= link_to "&#x2699".html_safe, target_path, class: 'btn btn-sm btn-outline-light ct-table-btn' %>
          </div>
        </td>
      </tr>
    <% end -%>
    </tbody>
  </table>
</div>
<% if @entries.empty? %>
  <div class="alert alert-secondary" role="alert">No entries to display</div>
<% end %>